<!-- <!DOCTYPE html> -->
<html>
  <head>
    <title>Canvas Game with Card Overlay</title>
    <style>
      /* Set the canvas width to the full width of the page */
      body {
        margin: 0;
        background-image: linear-gradient(rgb(115, 115, 255), lightblue);
      }
      canvas {
        display: block;
        /* width: 100%; */
        height: 100vh;
      }

      /* Set the card element to cover the same area as the game border */
      .game-card {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        box-sizing: border-box;
        border: 2px solid #000;
        /* width: 80%;
        height: 80%; */
        width: 400px;
        padding: 20px;
        z-index: -1;
      }
    </style>
  </head>
  <body>
    <canvas id="myCanvas"></canvas>
    <div class="game-card">
      <h2>Card Overlay</h2>
      <p>This is the card element that will be displayed on top of the game border.</p>
    </div>
    <!-- <script>
      // Get the canvas element and set its dimensions
      const canvas = document.getElementById('myCanvas');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      // Add your game code here
    </script> -->
    
    <!-- <script>
      // Get the canvas element and set its dimensions to match the game card
      const canvas = document.getElementById('myCanvas');
      const gameCard = document.querySelector('.game-card');
      canvas.width = gameCard.clientWidth;
      canvas.height = gameCard.clientHeight;

      // Add your game code here
    </script> -->

    <script>
      // Get the canvas element and set its dimensions to match the game card
      const canvas = document.getElementById('myCanvas');
      const gameCard = document.querySelector('.game-card');
      const fakeCanvas = {
        width2: gameCard.clientWidth,
        height2: gameCard.clientHeight,
        width: gameCard.offsetWidth,//gameCard.clientWidth,
        height: gameCard.offsetHeight,//gameCard.clientHeight,
        x: gameCard.offsetLeft,//gameCard.clientLeft,
        y: gameCard.offsetTop//gameCard.clientTop
      }
      console.log({fakeCanvas, gameCard})
      console.log([fakeCanvas.x, fakeCanvas.y])
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      // Get the canvas context and draw a fake border
      const ctx = canvas.getContext('2d');
      ctx.strokeStyle = 'red';
      ctx.lineWidth = 4;
      
      // not the write coords... not sure why
      const startX = fakeCanvas.x - ctx.lineWidth * 2
      const startY = fakeCanvas.y - ctx.lineWidth * 2
      ctx.strokeRect(startX, startY, fakeCanvas.width, fakeCanvas.height);

      // this works... breaks on resize though. should happen in some draw loop
      const rect = gameCard.getBoundingClientRect();
      const x = rect.left + window.scrollX;
      const y = rect.top + window.scrollY;
      ctx.strokeRect(x, y, fakeCanvas.width, fakeCanvas.height);

      // const fakeCanvas = {
      //   width: gameCard.clientWidth,
      //   height: gameCard.clientHeight,
      //   x: gameCard.offsetLeft + gameCard.clientLeft,
      //   y: gameCard.offsetTop + gameCard.clientTop
      // };

      // // Resize the canvas to fill the screen
      // canvas.width = window.innerWidth;
      // canvas.height = window.innerHeight;

      // // Get the canvas context and draw a fake border
      // const ctx = canvas.getContext('2d');
      // ctx.strokeStyle = 'red';
      // ctx.lineWidth = 4;
      // ctx.strokeRect(fakeCanvas.x - ctx.lineWidth, fakeCanvas.y - ctx.lineWidth, fakeCanvas.width + ctx.lineWidth * 2, fakeCanvas.height + ctx.lineWidth * 2);

      // Add event listeners to the canvas to allow the user to draw
      let isDrawing = false;
      let lastX = 0;
      let lastY = 0;

      canvas.addEventListener('mousedown', e => {
        console.log()
      });

      canvas.addEventListener('mousedown', e => {
        console.log({x: e.offsetX, y: e.offsetY})
        isDrawing = true;
        lastX = e.offsetX;
        lastY = e.offsetY;
      });

      canvas.addEventListener('mousemove', e => {
        if (isDrawing) {
          ctx.beginPath();
          ctx.moveTo(lastX, lastY);
          ctx.lineTo(e.offsetX, e.offsetY);
          ctx.stroke();
          lastX = e.offsetX;
          lastY = e.offsetY;
        }
      });

      canvas.addEventListener('mouseup', () => {
        isDrawing = false;
      });
    </script>
  </body>
</html>
